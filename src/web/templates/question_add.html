{% extends "base.html" %}

{% block title %}Добавить вопрос{% endblock %}

{% block content %}
    <div class="container mt-4">
        <h2>Добавить вопрос</h2>
        <div class="slide-container">
            <form id="questionForm" action="/site/questions/add" method="post">
                <!-- Шаг 1: Добавить текст вопроса -->
                <div class="slide active" id="step1">
                    <div class="mb-3">
                        <label for="questionText" class="form-label">Текст вопроса</label>
                        <input type="text" class="form-control" id="questionText" name="questionText" required>
                    </div>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Далее</button>
                </div>

                <!-- Шаг 2: Добавить ответы -->
                <div class="slide" id="step2">
                    <div id="answersContainer">
                        <div class="mb-3">
                            <label class="form-label">Ответ 1</label>
                            <input type="text" class="form-control" name="answer1" required>
                            <input type="radio" name="correctAnswer" value="0"> Правильный ответ
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ответ 2</label>
                            <input type="text" class="form-control" name="answer2" required>
                            <input type="radio" name="correctAnswer" value="1"> Правильный ответ
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ответ 3</label>
                            <input type="text" class="form-control" name="answer3" required>
                            <input type="radio" name="correctAnswer" value="2"> Правильный ответ
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Ответ 4</label>
                            <input type="text" class="form-control" name="answer4" required>
                            <input type="radio" name="correctAnswer" value="3"> Правильный ответ
                        </div>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Назад</button>
                    <button type="button" class="btn btn-primary" onclick="nextStep()">Далее</button>
                </div>

                <!-- Шаг 3: Добавить геолокацию -->
                <div class="slide" id="step3">
                    <div class="mb-3">
                        <label for="latitude" class="form-label">Широта</label>
                        <input type="number" step="any" class="form-control" id="latitude" name="latitude" required>
                    </div>
                    <div class="mb-3">
                        <label for="longitude" class="form-label">Долгота</label>
                        <input type="number" step="any" class="form-control" id="longitude" name="longitude" required>
                    </div>
                    <button type="button" class="btn btn-secondary" onclick="prevStep()">Назад</button>
                    <button type="submit" class="btn btn-primary">Сохранить</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        let currentStep = 1;

        function showStep(step) {
            console.log(`Showing step ${step}`);
            document.querySelectorAll('.slide').forEach(function (element) {
                element.classList.remove('active');
            });
            document.getElementById(`step${step}`).classList.add('active');
            currentStep = step;
        }

        function nextStep() {
            if (currentStep < 3) {
                showStep(currentStep + 1);
            }
        }

        function prevStep() {
            if (currentStep > 1) {
                showStep(currentStep - 1);
            }
        }

        // Initialize the first step as visible
        showStep(currentStep);
    </script>
{% endblock %}
